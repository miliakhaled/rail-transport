(this.webpackJsonptransport_frontend=this.webpackJsonptransport_frontend||[]).push([[0],{295:function(e,t,n){e.exports=n(593)},300:function(e,t,n){},301:function(e,t,n){},593:function(e,t,n){"use strict";n.r(t);var a=n(0),l=n.n(a),i=n(7),r=n.n(i),o=(n(300),n(13)),c=(n(301),n(599)),s=n(105),u=n(57),m=n(45),d=n(605),p=n(120),f=n(43),g=n(601),h=n(598),v=n(602),b=n(55),E=n(22),y=n.n(E),O=n(19),j=n.n(O);function C(){var e=Object(f.a)(["\n    query getMe{\n      me {\n        first_name,\n        last_name,\n    profile {\n      photo\n      job\n    }\n  }\n    }\n  "]);return C=function(){return e},e}function x(){var e=Object(b.b)(y()(C())).data;return l.a.createElement("div",{style:{width:"100%",height:200,display:"flex",justifyContent:"center",flexDirection:"row"}},l.a.createElement(g.a,{bordered:!1,style:{backgroundColor:"transparent",textAlign:"center"}},l.a.createElement(h.a,{size:"large",src:"http://".concat(window.location.hostname,":8000/").concat(j.a.get(e,"me.profile.photo",""))}),l.a.createElement("br",null),l.a.createElement(v.a,{type:"danger",style:{color:"white",textAlign:"center"},level:4},j.a.get(e,"me.first_name","")," ",j.a.get(e,"me.last_name",""))))}var k=n(47),_=Object(k.a)(),w="http".concat("s","://").concat(window.location.hostname,":").concat(80),I="http".concat("s","://").concat(window.location.hostname).concat("","/gql");function q(e){var t=e.color,n=void 0===t?"dark":t,i=e.links,r=Object(a.useState)(!1),s=Object(o.a)(r,2),u=s[0],m=s[1];return l.a.createElement(c.a.Sider,{collapsible:!0,breakpoint:"md",width:"250",style:{paddingTop:64},collapsed:u,onCollapse:function(e){return m(!u)}},l.a.createElement(x,null),l.a.createElement(d.a,{theme:n,mode:"inline",defaultSelectedKeys:[_.location.pathname],defaultOpenKeys:i.filter((function(e){return"multiple"===e.type&&-1!==e.pages.findIndex((function(e){return e.href===_.location.pathname}))})).map((function(e){return e.title}))},i.map((function(e,t){return"signle"===e.type?l.a.createElement(d.a.Item,{key:e.href,className:"customclass"},l.a.createElement(l.a.Fragment,null,e.icon,l.a.createElement("span",null," ",e.title),l.a.createElement(p.a,{to:e.href}))):l.a.createElement(d.a.SubMenu,{key:e.title,title:l.a.createElement("span",null,e.icon,l.a.createElement("span",null,e.title))},e.pages.map((function(e,t){return l.a.createElement(d.a.Item,{key:e.href},l.a.createElement("strong",null," ",e.title),l.a.createElement(p.a,{to:e.href}))})))}))))}var N=n(41),S=n(17),D=n(9),F=n(604),P=n(606),$=n(618),M=n(614),T=n(284),L=n.n(T),V=n(610),z=n(611),R=n(616),U=n(615),A=n(617),G=n(204),Y=n.n(G),J=n(603),W=n(10),B=n(609);function H(e){var t=e.fieldDef,n=e.onChange,a=e.label,i=void 0===a||a,r=t.properties.defaultChecked,o=t.title,c=t.name,s=t.required,u=t.rules,m=void 0===u?[]:u;return l.a.createElement(J.a.Item,{label:i?o:"",labelCol:{span:24},name:c,valuePropName:"checked",rules:[{required:s,message:"".concat(o," est obligatoire !")}].concat(Object(D.a)(m)),style:{width:"100%"}},l.a.createElement(B.a,{defaultChecked:r,onChange:function(e){return n(Object(W.a)({},c,e.target.checked))},style:{width:"100%"}},o))}var K=n(600);function Q(e){var t=e.fieldDef,n=(e.values,e.onChange),a=e.label,i=void 0===a||a,r=t.properties,o=r.picker,c=(r.defaultDate,r.format),s=t.title,u=t.name,m=t.required,d=t.rules,p=void 0===d?[]:d,f=t.size,g=void 0===f?"large":f;return l.a.createElement(J.a.Item,{label:i?s:"",labelCol:{span:24},name:u,rules:[{type:"object",required:m,message:"".concat(s," est obligatoire !")}].concat(Object(D.a)(p)),style:{width:"100%"}},l.a.createElement(K.a,{placeholder:s,format:c||void 0,picker:o,allowClear:!0,onChange:function(e){n(Object(W.a)({},u,e))},size:g,style:{width:"100%"}}))}var X=n(293);function Z(e){var t=e.fieldDef,n=e.onChange,a=e.label,i=void 0===a||a,r=t.properties,o=(r.begin,r.end,r.picker,t.name),c=t.title,s=t.required,u=t.size,m=void 0===u?"large":u;return l.a.createElement(J.a.Item,{label:i?c:"",style:{width:"100%"},name:o,rules:[{required:s,message:"".concat(c," est obligatoire !")}]},l.a.createElement(K.a.RangePicker,{size:m,style:{width:"100%"},locale:X.a,onChange:function(e){var t,a;e?n((t={},Object(W.a)(t,o[0],e&&e[0]&&e[0].format("YYYY-MM-DD")),Object(W.a)(t,o[1],e&&e[1]&&e[1].format("YYYY-MM-DD")),t)):n((a={},Object(W.a)(a,o[0],null),Object(W.a)(a,o[1],null),a))}}))}var ee=z.a.Option,te=z.a.OptGroup;function ne(e){var t=e.fieldDef,n=e.onChange,a=e.values,i=e.save,r=e.label,o=void 0===r||r,c=t.properties,s=c.responseTitle,u=void 0===s?"response":s,m=c.defaultValue,d=c.query,p=c.variables,f=c.mode,g=c.filters,h=void 0===g?[]:g,v=c.show,E=void 0===v?"designation":v,y=c.identifier,O=void 0===y?"id":y,C=c.get_items,x=c.divider,k=t.size,_=void 0===k?"large":k,w=t.name,I=t.title,q=t.required,N=t.rules,F=void 0===N?[]:N,P=t.editable,$=void 0===P||P,M=Object(b.b)(d,{variables:Object(S.a)({},p,{},h.reduce((function(e,t){return Object(S.a)({},e,Object(W.a)({},t,a?a[t]:""))}),{}))}),T=M.data,L=M.loading,V=C?j.a.get(T,"".concat(u,".").concat(C),[]):j.a.get(T,u,[]),R=function(e){n(Object(W.a)({},w,e))},U=x?j.a.groupBy(V,x):null,A=U?Object.keys(U):null;return l.a.createElement(J.a.Item,{label:o?I:"",labelCol:{span:24},name:w,rules:[{required:q,message:"".concat(I," est obligatoire !")}].concat(Object(D.a)(F)),style:{width:"100%"}},l.a.createElement(z.a,{disabled:!$,size:_,onChange:i?function(e,t){var n=V[V.findIndex((function(t){return t[O]===e}))],a=i.fields.reduce((function(e,t){return Object(S.a)({},e,Object(W.a)({},t,j.a.get(n,t,"")))}),{});i.action(a),R(e)}:R,mode:f,placeholder:I,loading:L,allowClear:!0,defaultValue:m,showSearch:!0,optionFilterProp:"children"},x&&U&&A?null===A||void 0===A?void 0:A.map((function(e){return l.a.createElement(te,{label:e},U[e].map((function(e){return l.a.createElement(ee,{key:e[O],value:e[O]},e[E])})))})):V.map((function(e){return l.a.createElement(ee,{key:e[O],value:e[O]},e[E])}))))}function ae(e){var t=e.fieldDef,n=(e.values,e.onChange),a=e.save,i=e.label,r=void 0===i||i,o=t.properties,c=o.defaultValue,s=o.mode,u=o.choices,m=t.size,d=void 0===m?"large":m,p=t.name,f=t.title,g=t.required,h=t.rules,v=void 0===h?[]:h,b=function(e){n(Object(W.a)({},p,e))};return l.a.createElement(J.a.Item,{rules:[{required:g,message:"".concat(f," est obligatoire !")}].concat(Object(D.a)(v)),name:p,label:r?f:"",style:{width:"100%"}},l.a.createElement(z.a,{onChange:a?function(e,t){a.action(Object(W.a)({},p,e)),b(e)}:b,mode:s,allowClear:!0,size:d,placeholder:f,defaultValue:c},u.map((function(e){return l.a.createElement(z.a.Option,{value:e.value},e.title)}))))}var le=n(608);function ie(e){var t=e.fieldDef,n=e.onChange,a=(e.values,e.label),i=void 0===a||a,r=t.properties,o=r.defaultValue,c=r.type,s=void 0===c?"text":c,u=t.name,m=t.title,d=t.required,p=t.size,f=void 0===p?"large":p,g=t.info;return l.a.createElement(J.a.Item,{name:u,label:i?m:"",help:g,rules:[{required:d,message:"".concat(m," est obligatoire !")}]},l.a.createElement(le.a,{defaultValue:o,onChange:function(e){return n(Object(W.a)({},u,e.target.value))},type:s||"text",size:f,placeholder:m,name:u}))}function re(e){var t=e.fieldDef,n=e.onChange,a=void 0===n?function(e){}:n,i=e.label,r=void 0!==i&&i;e.save,e.values;switch(t.properties.type){case"select":return l.a.createElement(ne,{fieldDef:t,onChange:a,label:r});case"static":return l.a.createElement(ae,{fieldDef:t,onChange:a,label:r});case"date":return l.a.createElement(Q,{fieldDef:t,onChange:a,label:r});case"boolean":return l.a.createElement(H,{fieldDef:t,onChange:a,label:r});case"date_range":return l.a.createElement(Z,{fieldDef:t,onChange:a,label:r});default:return l.a.createElement(ie,{fieldDef:t,onChange:a,label:r})}}var oe=n(52),ce=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[];return t.forEach((function(t){var a=e.reduce((function(e,n){return Object(S.a)({},e,Object(W.a)({},n.field,j.a.get(t,n.properties.get,t[n.name])))}),{});n.push(a)})),n},se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n={},a=e.filter((function(e){return"multiple"===e.properties.type}));return n=Object(S.a)({},n,{},e.filter((function(e){return!("multiple"===e.properties.type)})).reduce((function(e,n){return Object(S.a)({},e,Object(W.a)({},n.name,"multiple"===n.properties.mode?j.a.get(t,n.name,[]).map((function(e){return j.a.get(e,"id",[])})):j.a.get(t,n.properties.get+"",t[n.name])))}),{})),a.forEach((function(e){n=Object(S.a)({},n,Object(W.a)({},e.name,Object(D.a)(ce(e.properties.fields,t[e.name]))))})),n},ue=n(106),me=n(612),de=n(613);function pe(e){var t=e.info,n=void 0===t?"dsdsd":t;return l.a.createElement("div",null,l.a.createElement(me.a,{content:l.a.createElement("div",{style:{width:200}},l.a.createElement(v.a.Text,null,n)),placement:"right"},l.a.createElement(de.a,{style:{fontSize:12,color:"#888888",marginLeft:8}})))}function fe(e){var t=e.fields,n=e.index,i=(e.unique,e.form,Object(a.useState)({})),r=Object(o.a)(i,2),c=r[0],m=r[1],d=function(e){m(Object(S.a)({},c,{},e))};return l.a.createElement(s.a,{gutter:16,align:"middle"},t.map((function(e,a){return l.a.createElement(u.a,{xs:24,md:Math.floor(24/t.length),style:{alignSelf:"center"}},l.a.createElement(re,{fieldDef:Object(S.a)({},e,{name:void 0!==n?[n,e.name]:e.name}),onChange:d,label:!1}))})))}function ge(e){var t=e.inputs;return l.a.createElement(J.a.List,{name:t.name},(function(e,n){var a=n.add,i=n.remove;return l.a.createElement(g.a,{title:l.a.createElement(s.a,{justify:"space-between"},l.a.createElement(u.a,{style:{display:"flex",alignItems:"center"}},l.a.createElement("div",{style:{display:"flex"}},t.title," ",t.info&&l.a.createElement(pe,{info:t.info}))),l.a.createElement(u.a,{style:{display:"flex",alignItems:"center"}},l.a.createElement(m.a,{type:"primary",shape:"circle",onClick:function(){a()}},l.a.createElement(M.a,null))))},0===e.length?l.a.createElement(ue.a,{description:"aucun \xe9l\xe9ment n'a encore \xe9t\xe9 ajout\xe9!"}):null,e.map((function(n,a){return l.a.createElement(s.a,{gutter:[16,2],style:{display:"flex",alignItems:"start"}},l.a.createElement(u.a,{span:23},l.a.createElement(J.a.Item,{key:n.key},l.a.createElement(fe,{fields:t.properties.fields,index:a}))),e.length>0?l.a.createElement(u.a,{span:1},l.a.createElement(m.a,{size:"small",className:"dynamic-delete-button",icon:l.a.createElement(U.a,null),danger:!0,onClick:function(){i(n.name)}})):null)})))}))}var he=n(215),ve=n.n(he);ve.a.setAppElement("#root");var be={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)"}};function Ee(e){var t,n=e.inputs,i=(e.onFinishUpdate,e.title,e.initialValues),r=e.span,c=void 0===r?12:r,m=e.form,d=e.onFinish,p=e.label,f=void 0!==p&&p,h=e.card,v=void 0===h||h,b=Object(oe.useForm)(),E=Object(o.a)(b,1)[0],y=Object(a.useState)({}),O=Object(o.a)(y,2),j=O[0],C=O[1],x=function(e){C(Object(S.a)({},j,{},e))},k=l.a.useState(!1),_=Object(o.a)(k,2),w=_[0],I=_[1];function q(){I(!1)}return l.a.createElement("div",null,l.a.createElement(ve.a,{isOpen:w,onAfterOpen:function(){t.style.color="#f00"},onRequestClose:q,style:be,contentLabel:"Example Modal"},l.a.createElement("h2",{ref:function(e){return t=e}},"Hello"),l.a.createElement("button",{onClick:q},"close"),l.a.createElement("div",null,"I am a modal"),l.a.createElement("form",null,l.a.createElement("input",null),l.a.createElement("button",null,"tab navigation"),l.a.createElement("button",null,"stays"),l.a.createElement("button",null,"inside"),l.a.createElement("button",null,"the modal"))),l.a.createElement(g.a,{title:v?l.a.createElement("div",{style:{display:"flex"}},n.title," ",n.info&&l.a.createElement(pe,{info:n.info})):null,style:{marginBottom:16}},l.a.createElement(J.a,Object.assign({initialValues:i?se(n.fields,i):{}},{labelCol:{span:24},wrapperCol:{span:24}},{form:m||E,name:"form",onFinish:d}),l.a.createElement("div",{className:"form"},l.a.createElement("div",{title:n.title},l.a.createElement(s.a,{gutter:[20,0]},n.fields.map((function(e){return"multiple"===e.properties.type?l.a.createElement(u.a,{span:24},l.a.createElement(ge,{inputs:e})):l.a.createElement(u.a,{md:c,xs:24},l.a.createElement(re,{fieldDef:e,label:f,onChange:x,values:j}))}))))))))}function ye(e){var t=e.resultName,n=void 0===t?"response":t,i=(e.history,e.mutation),r=e.buildInput,c=void 0===r?function(e){return e}:r,d=e.inputs,p=(e.onFinishUpdate,e.redirect,e.title,e.initialValues),f=void 0===p?{}:p,g=e.span,h=void 0===g?12:g,v=(e.updateForm,e.onFinish,e.label),E=void 0!==v&&v,y=e.checkResponse,O=void 0===y?function(e){return j.a.get(e,"data.".concat(n,".ok"),!1)}:y,C=Object(b.a)(i),x=Object(o.a)(C,1)[0],k=Object(oe.useForm)(),_=Object(o.a)(k,1)[0],w=Object(a.useState)(!1),I=Object(o.a)(w,2);I[0],I[1];return l.a.createElement("div",null,l.a.createElement(Ee,{title:"Create Person",form:_,mode:"create",span:h,label:E,inputs:d,onFinish:function(e){return function(e){var t=c(e);x({variables:{input:t}}).then((function(e){O&&O(e)?P.a.success("\xc9l\xe9ment cr\xe9\xe9 avec succ\xe8s"):(j.a.get(e,"data.".concat(n,".errors"),!1)&&P.a.error("Une erreur est survenue dans les champs suivant : ".concat(j.a.get(e,"data.".concat(n,".errors"),[]).reduce((function(e,t){return"".concat(e,"  ").concat(t.field)}),""))),console.log(j.a.get(e,"data.".concat(n,".errors"))))})).catch((function(e){P.a.error("Une erreur est survenue"),console.log(e)}))}(e)},initialValues:f}),l.a.createElement(s.a,{gutter:16,justify:"end"},l.a.createElement(u.a,{span:3},l.a.createElement(m.a,{onClick:function(){_.resetFields()},htmlType:"button",style:{width:"100%"},type:"default"},"supprimer")),l.a.createElement(u.a,{span:3},l.a.createElement(m.a,{onClick:function(){_.submit()},style:{width:"100%"},type:"primary"},"engregistrer"))))}n(151);function Oe(e){var t=e.data,n=void 0===t?[]:t,i=e.onDelete,r=e.onSelect,c=e.onUpdate,s=e.history,u=e.loading,p=e.actions,f=void 0===p?[]:p,g=e.columns,h=e.updateColumn,v=void 0===h||h,b=e.deleteColumn,E=void 0===b||b,y=e.isUpdatable,O=void 0===y?function(){return!0}:y,C=e.isDeletable,x=void 0===C?function(){return!0}:C,k=e.updateLink,_=(e.refetch,e.pagination),w=e.fetchMoreData,I=e.title,q=e.count,N=e.updateInputs,S=Object(a.useState)({}),P=Object(o.a)(S,2),$=P[0],M=P[1],T=Object(a.useState)(!1),G=Object(o.a)(T,2),J=G[0],W=G[1],B=Object(oe.useForm)(),H=Object(o.a)(B,1)[0],K=Object(D.a)(g),Q=_.onPageChange,X=_.onRowPerPageChange,Z=_.page,ee=_.rowPerPage;return v&&K.push({title:"modifier",render:function(e){return O(e)?l.a.createElement(m.a,{icon:l.a.createElement(R.a,null),onClick:function(){k?s&&s.push(k+"/".concat(e.id)):(H.resetFields(),H.setFieldsValue($),M(e),r&&r(e),W(!0))}}):null},width:80,align:"center"}),E&&K.push({title:"supprimer",render:function(e){return x(e)?l.a.createElement(m.a,{icon:l.a.createElement(U.a,null),danger:!0,onClick:function(){var t;t=e,Y()({title:"Voulez-vous supprimer cet objet?",content:j.a.get(t,"designation",""),okText:"supprimer",cancelText:"annuler",onOk:function(){i&&i(t.id)}})}}):null},width:80,align:"center"}),f.length>0&&K.push({title:"actions",render:function(e){return l.a.createElement(V.a,{overlay:l.a.createElement(d.a,{theme:"dark"},f.map((function(t){return l.a.createElement(d.a.Item,{style:{alignItems:"center",color:"white",display:"flex",justifyContent:"space-between",width:130},key:"1",onClick:function(){return t.onClick(e)}},t.title,l.a.createElement(t.icon,null))})))},l.a.createElement(m.a,{size:"small",type:"ghost",icon:l.a.createElement(A.a,null)}))},width:40,align:"center"}),l.a.createElement("div",null,N?l.a.createElement(F.a,{key:$,afterClose:function(){W(!1),H.resetFields(),M({}),r&&r({}),F.a.destroyAll()},destroyOnClose:!0,visible:J,onCancel:function(){W(!1),H.resetFields(),M({}),r&&r({}),F.a.destroyAll()},title:N.title,onOk:function(){H.validateFields().then((function(e){c&&c(e),H.resetFields()}))}},l.a.createElement(Ee,{initialValues:$,card:!1,inputs:N,title:"",onFinish:function(e){console.log()}})):null,l.a.createElement(L.a,{rowKey:"id",loading:u,columns:K,dataSource:n.slice(Z*ee,Z*ee+ee),pagination:!1,bordered:!0,title:function(){return l.a.createElement("div",null,I)},size:"middle"}),l.a.createElement("br",null),l.a.createElement("div",{style:{textAlign:"right"}},l.a.createElement(m.a.Group,null,l.a.createElement(m.a,{disabled:0===Z,size:"small",onClick:function(){return Q(Z-1)}},"<"),l.a.createElement("div",{style:{width:5}}," "),l.a.createElement(m.a,{disabled:n.length==q&&Math.floor(n.length/ee)==Z,size:"small",onClick:function(){Q(Z+1),w&&w(ee,Z)}}," ",">"," "))," ",l.a.createElement(z.a,{onChange:function(e){X(e),Q(0)},value:_.rowPerPage,size:"small"},l.a.createElement(z.a.Option,{value:10},"10 / page"),l.a.createElement(z.a.Option,{value:20},"20 / page"),l.a.createElement(z.a.Option,{value:40},"40 / page"))))}var je=n(607);function Ce(e){var t=e.onClose,n=e.visible,i=e.fields,r=e.page,c=void 0===r?0:r,d=e.rowPerPage,p=e.variables,f=e.filename,g=void 0===f?"data":f,h=e.url,v=void 0===h?"export/xls":h,b=e.appName,E=e.modelName,y=Object(a.useState)(i?i.map((function(e){return Object(S.a)({},e)})):[]),O=Object(o.a)(y,2),j=O[0],C=O[1],x=Object(a.useState)("all"),k=Object(o.a)(x,2),_=k[0],I=k[1],q=Object(a.useState)("all"),N=Object(o.a)(q,2),P=N[0],$=N[1],M=Object(a.useState)(g),T=Object(o.a)(M,2),L=T[0],V=T[1];return l.a.createElement("form",{action:"".concat(w,"/").concat(v),id:"form",method:"get"},l.a.createElement("input",{hidden:!0,name:"items",value:_}),l.a.createElement("input",{hidden:!0,name:"selection",value:P}),l.a.createElement("input",{hidden:!0,name:"variables",value:JSON.stringify(p)}),l.a.createElement("input",{hidden:!0,name:"filename",value:L}),l.a.createElement("input",{hidden:!0,name:"app_name",value:b}),l.a.createElement("input",{hidden:!0,name:"model_name",value:E}),l.a.createElement("input",{hidden:!0,name:"fields",value:j.map((function(e){return e.name})).toString()}),l.a.createElement("input",{hidden:!0,name:"headers",value:j.map((function(e){return e.title})).toString()}),l.a.createElement("input",{hidden:!0,name:"page",value:c}),l.a.createElement("input",{hidden:!0,name:"rowPerPage",value:d}),l.a.createElement(F.a,{width:800,destroyOnClose:!0,visible:n,footer:l.a.createElement("div",null,l.a.createElement(m.a,{onClick:function(){t()}},"fermer"),l.a.createElement(m.a,{type:"primary",htmlType:"submit",form:"form"},"exporter")),okText:"exporter",cancelText:"fermer",onCancel:function(){return t()},title:"Exporter"},l.a.createElement(s.a,{gutter:[10,10]},l.a.createElement(u.a,{span:24},l.a.createElement("h3",null,l.a.createElement("u",null,"Colonne \xe0 exporter"))),null===i||void 0===i?void 0:i.map((function(e){return l.a.createElement(u.a,{span:8},l.a.createElement(B.a,{checked:-1!==j.findIndex((function(t){return t.name==e.name})),onChange:function(t){t.target.checked&&e.name?C([].concat(Object(D.a)(j),[e])):!t.target.checked&&e.name&&C(j.filter((function(t){return t.name!==e.name})))}},e.title))}))),l.a.createElement("br",null),l.a.createElement(s.a,null,l.a.createElement(u.a,{span:24},l.a.createElement("h3",null,l.a.createElement("u",null,"Nombre des items"))),l.a.createElement("hr",null)," ",l.a.createElement(u.a,{span:24},l.a.createElement(je.a.Group,{value:_,onChange:function(e){return I(e.target.value)}},l.a.createElement(je.a,{value:"all"},"Tout"),l.a.createElement(je.a,{value:"displayed"},"Elements affich\xe9s")))),l.a.createElement("br",null),l.a.createElement(s.a,null,l.a.createElement(u.a,{span:24},l.a.createElement("h3",null,l.a.createElement("u",null,"Selection"))),l.a.createElement("hr",null)," ",l.a.createElement(u.a,{span:24},l.a.createElement(je.a.Group,{value:P,onChange:function(e){return $(e.target.value)}},l.a.createElement(je.a,{value:"all"},"Tout"),l.a.createElement(je.a,{value:"filter"},"Resultats de la recherce")))),l.a.createElement("br",null),l.a.createElement(s.a,null,l.a.createElement(J.a.Item,{label:"Nom du fichier (Excel)"},l.a.createElement(le.a,{placeholder:"nom du fichier",value:L,onChange:function(e){return V(e.target.value)}})," ")," ")))}F.a.confirm;var xe=l.a.createContext({}),ke=(xe.Provider,xe.Consumer,function(e){var t,n,i=e.graphql,r=e.resultTitle,c=void 0===r?"response":r,d=e.variables,p=e.initVariables,f=void 0===p?{}:p,g=e.title,h=e.columns,v=e.isDeletable,E=void 0===v?function(){return!0}:v,y=e.isUpdatable,O=void 0===y?function(){return!0}:y,C=e.actions,x=void 0===C?[]:C,k=e.createLink,_=void 0===k?"":k,w=e.deleteColumn,I=void 0===w||w,q=(e.expand,e.updateColumn),N=void 0===q||q,F=e.updateInputs,T=e.updateLink,L=e.nested,V=e.history,z=e.exportUrl,R=e.expprtFileName,U=e.appName,A=e.modelName,G=Object(a.useState)({}),Y=Object(o.a)(G,2),J=Y[0],W=Y[1],B=Object(a.useState)(!1),H=Object(o.a)(B,2),K=(H[0],H[1],function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Object(a.useState)(e),l=Object(o.a)(n,2),i=l[0],r=l[1],c=Object(a.useState)(t),s=Object(o.a)(c,2),u=s[0],m=s[1];return{rowPerPage:i,page:u,onRowPerPageChange:r,onPageChange:m}}()),Q=Object(b.b)(i.all,{variables:Object(S.a)({},d,{limit:K.rowPerPage,offset:0},f),fetchPolicy:"cache-and-network"}),X=Q.data,Z=Q.loading,ee=Q.fetchMore,te=Q.refetch;try{var ne=Object(b.a)(i.delete),ae=Object(o.a)(ne,1);t=ae[0]}catch(ue){}try{var le=Object(b.a)(i.update),ie=Object(o.a)(le,1);n=ie[0]}catch(ue){}Object(a.useEffect)((function(){K.onPageChange(0)}),[d]);var re=Object(a.useState)(!1),oe=Object(o.a)(re,2),ce=oe[0],se=oe[1];return l.a.createElement(xe.Provider,{value:{refetch:te}},U&&A?l.a.createElement(Ce,{appName:U,modelName:A,filename:R,url:z,variables:d,fields:h.map((function(e){var t,n;return{name:null===(t=e.dataIndex)||void 0===t?void 0:t.toString(),title:null===(n=e.title)||void 0===n?void 0:n.toString()}})),visible:ce,onClose:function(){return se(!ce)},page:K.page,rowPerPage:K.rowPerPage}):null,l.a.createElement(s.a,{justify:"end",gutter:[16,10]},U&&A?l.a.createElement(u.a,{md:12,lg:3,xs:24},l.a.createElement(m.a,{htmlType:"button",icon:l.a.createElement($.a,null),danger:!0,style:{width:"100%"},onClick:function(){return se(!0)}},"exporter")):null,l.a.createElement(u.a,{md:12,lg:3,xs:24},l.a.createElement(m.a,{style:{width:"100%",borderWidth:0,padding:0},type:"primary",icon:l.a.createElement(M.a,null),onClick:function(){return V&&V.push(_)}},"nouveau"))),l.a.createElement("br",null),l.a.createElement(Oe,{onSelect:W,onUpdate:function(e){var t=L?{id:J.id,input:Object(S.a)({},e)}:{input:Object(S.a)({},e,{id:J.id})};n({variables:t}).then((function(e){P.a.success("Operation avec succ\xe9e"),te()})).catch((function(e){return console.log(e)}))},fetchMoreData:function(e,t){ee({variables:{offset:X&&X.response.results.length,limit:e},updateQuery:function(e,t){var n=t.fetchMoreResult;return n?Object.assign({},e,{response:{results:[].concat(Object(D.a)(e.response.results),Object(D.a)(n.response.results))}}):e}})},title:g,pagination:K,data:j.a.get(X,"response.results",[]),count:j.a.get(X,"".concat(c,".totalCount"),0),columns:h,actions:x,isDeletable:E,isUpdatable:O,history:V,deleteColumn:I,loading:Z,onDelete:function(e){t({variables:{id:e}}).then((function(e){te()}))},refetch:te,fetchMore:ee,updateColumn:N,updateLink:T,updateInputs:F}))}),_e=n(292);var we=n(285),Ie=n.n(we);function qe(e){var t=e.filters,n=(e.variables,e.onVariablesChange),a=e.form;return l.a.createElement(Ie.a,{form:a},l.a.createElement(s.a,{gutter:[16,16]},null===t||void 0===t?void 0:t.map((function(e,t){return l.a.createElement(u.a,{span:e.span||4},l.a.createElement(re,{key:t,fieldDef:e,label:!1,onChange:n}))}))))}function Ne(e){var t=e.columns,n=e.graphql,i=e.resultTitle,r=void 0===i?"response":i,c=e.filters,s=e.updateColumn,u=void 0===s||s,m=e.deleteColumn,d=void 0===m||m,p=e.isUpdatable,f=void 0===p?function(){return!0}:p,g=e.isDeletable,h=void 0===g?function(){return!0}:g,v=e.actions,b=void 0===v?[]:v,E=e.createLink,y=void 0===E?"":E,O=e.expand,j=e.nested,C=e.title,x=e.updateLink,k=e.history,_=e.initVariables,w=void 0===_?{}:_,I=e.updateInputs,q=e.exportUrl,N=e.expprtFileName,D=e.appName,F=e.modelName,P=n.delete,$=n.all,M=n.update,T=Object(a.useState)(w),L=Object(o.a)(T,2),V=L[0],z=L[1];return l.a.createElement("div",null,l.a.createElement(qe,{filters:c,onVariablesChange:function(e){z(Object(S.a)({},V,{},e))}}),l.a.createElement(ke,{exportUrl:q,expprtFileName:N,actions:b,title:C,columns:t,graphql:{all:$,delete:P,update:M},variables:V,createLink:y,deleteColumn:d,expand:O,history:k,initVariables:w,isDeletable:h,isUpdatable:f,nested:j,resultTitle:r,updateColumn:u,updateLink:x,updateInputs:I,appName:D,modelName:F}))}function Se(){var e=Object(f.a)(["\n  query fetchClients(\n    $raison_social: String\n    $code_client: String\n    $limit: Int\n    $offset: Int\n  ) {\n    response: all_clients(\n      raison_social__icontains: $raison_social\n      code_client__icontains: $code_client\n    ) {\n      results(limit: $limit, offset: $offset) {\n        id\n        raison_social\n        code_client\n        address\n        email\n        phone\n        # barem {\n        #   designation\n        #   id\n        # }\n        contacts {\n          nom\n          prenom\n          fonction\n          email\n          phone\n        }\n      }\n      totalCount\n    }\n  }\n"]);return Se=function(){return e},e}var De=y()(Se()),Fe=n(88),Pe=function(e){return y()(Fe.mutation({operation:e,variables:{id:{type:"ID!"}},fields:["ok",{errors:["field","messages"]}]}).query)},$e=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"input";return y()(Fe.mutation({operation:"response:".concat(e),variables:Object(W.a)({},n,{type:t}),fields:["ok",{errors:["field","messages"]}]}).query)},Me=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"input";return y()(Fe.mutation({operation:"response:".concat(e),variables:Object(W.a)({},a,{type:t}),fields:[Object(W.a)({},"ok:".concat(n),["id"])]}).query)},Te=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["designation"],n=arguments.length>2?arguments[2]:void 0;return y()(Fe.query({operation:"response:".concat(e),variables:n,fields:["id"].concat(Object(D.a)(t))}).query)},Le=[{dataIndex:"nom",title:"Nom"},{dataIndex:"prenom",title:"Prenom"},{dataIndex:"fonction",title:"Fonction"},{dataIndex:"email",title:"Email"},{dataIndex:"phone",title:"T\xe9l\xe9phone"},{title:"Client",dataIndex:"client",render:function(e){return l.a.createElement(m.a,{type:"primary",size:"small",onClick:function(){return alert(e.id)}},j.a.get(e,"raison_social","undefinit"))}}],Ve={title:"Nouveau Contacts",fields:[{title:"Nom",name:"nom",properties:{type:"text"},required:!0},{title:"Prenom",name:"prenom",properties:{type:"text"},required:!0},{title:"Email",name:"email",properties:{type:"email"}},{title:"T\xe9l\xe9phone",name:"phone",properties:{type:"text"}},{title:"Fonction",name:"fonction",properties:{type:"text"}}]},ze=[],Re=Object(S.a)({},Ve,{fields:[].concat(Object(D.a)(Ve.fields),[{name:"client",title:"Client",properties:{type:"select",show:"raison_social",query:Te("clients",["raison_social"])},required:!0}])}),Ue=[{title:"Raison Social",dataIndex:"raison_social"},{title:"Code Client",dataIndex:"code_client"},{title:"address",dataIndex:"address"},{title:"email",dataIndex:"email"},{title:"Telephone",dataIndex:"phone"},{title:"Fix",dataIndex:"fix"},{title:"Fax",dataIndex:"fax"},{title:"NIF",dataIndex:"NIF"},{title:"TIN",dataIndex:"TIN"},{title:"RC",dataIndex:"RC"}],Ae={title:"Information G\xe9n\xe9rale",fields:[{name:"raison_social",title:"Raison_social",required:!0,properties:{type:"text"}},{name:"code_client",title:"Code Client",required:!0,properties:{type:"text"}},{name:"address",title:"Adresse",properties:{type:"text"}},{name:"phone",title:"Mobile",properties:{type:"text"}},{name:"fix",title:"Fix",properties:{type:"text"}},{name:"fax",title:"Fax",properties:{type:"text"}},{name:"email",title:"Email",properties:{type:"email"}},{name:"NIF",title:"NIF",properties:{type:"text"}},{name:"TIN",title:"TIN",properties:{type:"text"}},{name:"RC",title:"N\xb0 registre commercial",properties:{type:"text"}}]},Ge=[{title:"Raison Social",name:"raison_social",properties:{type:"text"}},{title:"Code Client",name:"code_client",properties:{type:"text"}}],Ye=(Object(S.a)({},Ae,{fields:[].concat(Object(D.a)(Ae.fields),[{title:"Contacts",name:"contact",properties:{type:"multiple",fields:Ve.fields}}])}),Object(S.a)({},Ae,{fields:[].concat(Object(D.a)(Ae.fields),[{title:"Contacts",name:"contacts_add",properties:{type:"multiple",fields:Ve.fields}}])}));function Je(){var e=Object(f.a)(["\n  query fetchContacts(\n    $nom: String\n    $prenom: String\n    $phone: String\n    $email: String\n    $client: ID\n    $limit: Int\n    $offset: Int\n  ) {\n    response: all_contacts(\n      nom__icontains: $nom\n      prenom__icontains: $prenom\n      email__icontains: $email\n      phone__icontains: $phone\n      client: $client\n    ) {\n      results(limit: $limit, offset: $offset) {\n        id\n        nom\n        prenom\n        fonction\n        email\n        phone\n        client {\n          raison_social\n          id\n        }\n      }\n      totalCount\n    }\n  }\n"]);return Je=function(){return e},e}var We=y()(Je());var Be=[{title:"Designation",dataIndex:"model",render:function(e){return l.a.createElement("div",null,e&&e.designation)}},{title:"Marque",dataIndex:"marque",render:function(e){return l.a.createElement(_e.a,{color:"green"},e)}},{title:"Matricule",dataIndex:"matricule"},{title:"Nature",dataIndex:"nature"},{title:"Ann\xe9e",dataIndex:"year",render:function(e){return l.a.createElement(_e.a,{color:"default"},e)}}],He={title:"Nouvelle V\xe9hicule",fields:[{name:"model",title:"Model",required:!0,properties:{divider:"engine_type.designation",type:"select",query:Te("enginemodels",["designation",{engine_type:["designation"]}]),get:"model.id"}},{name:"marque",title:"Marque",properties:{type:"text"}},{name:"matricule",required:!0,title:"Matricule",properties:{type:"text"}},{name:"nature",title:"Nature",properties:{type:"text"}},{name:"year",title:"Ann\xe9e",properties:{type:"date",picker:"year"}}],info:"creer une nouvelle v\xe9hicule dans le park Rail Logistic"},Ke={title:"Mettre \xe0 jour V\xe9hicule",fields:[{name:"model",editable:!1,title:"Model",required:!0,properties:{divider:"engine_type.designation",type:"select",query:Te("enginemodels",["designation",{engine_type:["designation"]}]),get:"model.id"}},{name:"marque",title:"Marque",properties:{type:"text"}},{name:"matricule",required:!0,title:"Matricule",properties:{type:"text"}},{name:"nature",title:"Nature",properties:{type:"text"}},{name:"year",title:"Ann\xe9e",properties:{type:"number"}}],info:"creer une nouvelle v\xe9hicule dans le park Rail Logistic"},Qe=[{name:"model",title:"Model",span:5,properties:{divider:"engine_type.designation",type:"select",query:Te("enginemodels",["designation",{engine_type:["designation"]}]),get:"model.id"}},{name:"matricule__icontains",title:"Matricule",properties:{type:"text"}},{name:"marque__icontains",title:"Marque",properties:{type:"text"}}];function Xe(){var e=Object(f.a)(["\n  query ALL_ENGINES(\n    $limit: Int\n    $offset: Int\n    $matricule__icontains: String\n    $year: Int\n    $marque__icontains: String\n    $model: ID\n  ) {\n    response: all_engines(\n      matricule__icontains: $matricule__icontains\n      marque__icontains: $marque__icontains\n      year__icontains: $year\n      model: $model\n    ) {\n      results(limit: $limit, offset: $offset) {\n        id\n        marque\n        matricule\n        model {\n          id\n          designation\n        }\n        nature\n        year\n      }\n      totalCount\n    }\n  }\n"]);return Xe=function(){return e},e}var Ze=y()(Xe());var et=[{component:function(e){return Object(N.a)(e),l.a.createElement("div",null,l.a.createElement(Ne,{title:"List des clients",history:_,createLink:"/clients/new",columns:Ue,filters:Ge,graphql:{all:De,delete:Pe("delete_client")},expprtFileName:"clients",appName:"clients",modelName:"Client"}))},path:"/clients/list"},{component:function(e){return Object(N.a)(e),l.a.createElement(ye,{history:_,span:8,label:!0,inputs:Ye,mutation:Me("create_nested_client","CreateClientInput!","client")})},path:"/clients/new"},{path:"/clients/contacts/list",component:function(e){return Object(N.a)(e),l.a.createElement("div",null,l.a.createElement(Ne,{columns:Le,filters:ze,createLink:"/clients/contacts/new",actions:[],initVariables:{},deleteColumn:!1,updateColumn:!1,history:_,graphql:{all:We},expprtFileName:"contacts",appName:"clients",modelName:"Contact"}))}},{path:"/clients/contacts/new",component:function(e){return Object(N.a)(e),l.a.createElement(ye,{label:!0,span:12,history:_,inputs:Re,initialValues:{},mutation:$e("create_contact","ContactCreateGenericType!")})}},{path:"/park/vehicules/list",component:function(e){return Object(N.a)(e),l.a.createElement("div",null,l.a.createElement(Ne,{title:"Liste des V\xe9hicules de Rail Logistic",columns:Be,filters:Qe,createLink:"/park/vehicules/create",actions:[],initVariables:{},deleteColumn:!1,updateColumn:!0,updateInputs:{title:Ke.title,fields:Ke.fields},history:_,graphql:{all:Ze,delete:Pe("delete_engine"),update:$e("update_engine","EngineUpdateGenericType!")},expprtFileName:"Park rail logistic",appName:"park",modelName:"Engine"}))}},{path:"/park/vehicules/create",component:function(e){return Object(N.a)(e),l.a.createElement(ye,{label:!0,buildInput:function(e){var t;return Object(S.a)({},e,{year:null===(t=e.year)||void 0===t?void 0:t.year()})},title:"Nouvelle V\xe9hicule",span:12,history:_,inputs:He,initialValues:{},mutation:$e("create_engine","EngineCreateGenericType!")})}}],tt=n(77);function nt(){return l.a.createElement(c.a.Content,{style:{margin:"24px 16px",padding:24,background:"",minHeight:280}},l.a.createElement(tt.c,null,et.map((function(e){return l.a.createElement(tt.a,{path:e.path,component:e.component,exact:!0})}))))}var at=n(32),lt=n(289),it=n(33),rt=n(290),ot=n(78),ct=n(287),st=n(286),ut=Object(st.a)((function(e){var t=e.graphQLErrors,n=e.networkError;e.response;t&&t.map((function(e){var t=e.message,n=e.locations,a=e.path;e.nodes;console.log("[GraphQL error]: Message: ".concat(t,", Location: ").concat(n,", Path: ").concat(a)),console.log(n)})),n&&console.log(n),n&&n.result&&n.result.map&&n.result.map((function(e){return console.log(e)})),n&&n.statusCode})),mt=Object(ct.a)((function(e,t){var n=t.headers,a=localStorage.getItem("token");return{headers:Object(S.a)({},n,{authorization:a?"JWT ".concat(a):""})}})),dt=(new it.a((function(e,t){var n=localStorage.getItem("token");return null==n&&window.location.replace("/"),e.setContext({headers:{authorization:n?"JWT ".concat(n):""}}),t(e)})),new lt.a({uri:I,credentials:"same-origin"})),pt=new ot.c({cache:new rt.a({addTypename:!1}),link:it.a.from([ut,mt,dt])}),ft=n(210),gt=n.n(ft),ht=n(621),vt=n(619),bt=n(620),Et=[{title:"Dashboard",href:"/dashboard",type:"signle",icon:l.a.createElement(vt.a,null)},{title:"Clients",type:"multiple",icon:l.a.createElement(bt.a,null),pages:[{title:"List des clients",href:"/clients/list"},{title:"Nouveau Client",href:"/clients/new"},{title:"contacts",href:"/clients/contacts/list"}]},{title:"Park",type:"multiple",pages:[{href:"/park/vehicules/list",title:"List"},{href:"/park/vehicules/create",title:"Nouveau V\xe9hicule"}]}],yt=l.a.createContext({});var Ot=function(){var e=Object(a.useState)("Rail Transport"),t=Object(o.a)(e,2),n=t[0],i=t[1];return l.a.createElement(yt.Provider,{value:{title:n,setValue:i}},l.a.createElement(at.a,{client:pt},l.a.createElement(tt.b,{history:_},l.a.createElement(c.a,{style:{height:"100%"}},l.a.createElement(q,{color:"dark",links:Et}),l.a.createElement(c.a,null,l.a.createElement(c.a.Header,{style:{backgroundColor:"white",padding:0}},l.a.createElement(s.a,{justify:"space-between",align:"middle",style:{width:"100%"}},l.a.createElement(u.a,{span:20,style:{textAlign:"left"}},l.a.createElement("div",{style:{display:"flex",alignItems:"baseline",paddingLeft:50,lineHeight:0}},l.a.createElement(gt.a,{level:3},n))),l.a.createElement(u.a,{span:1,style:{textAlign:"center"}},l.a.createElement(m.a,{icon:l.a.createElement(ht.a,null),style:{marginLeft:"auto"}})))),l.a.createElement(nt,null))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(Ot,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[295,1,2]]]);
//# sourceMappingURL=main.d2185795.chunk.js.map